@tailwind base;
@tailwind components;
@tailwind utilities;

/* Prevent scroll jumping and UI flickers during updates */
html {
  scroll-behavior: auto !important;
}

/* ===== SMOOTH TRANSITIONS ===== */

/* Transições suaves para todas as células de dados */
.data-cell {
  contain: layout style;
  transform: translateZ(0);
  transition: color 0.6s cubic-bezier(0.4, 0, 0.2, 1),
              background-color 0.6s cubic-bezier(0.4, 0, 0.2, 1),
              opacity 0.3s ease-out;
  will-change: auto;
}

/* Linhas de tabela com fade suave */
.table-row {
  transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1),
              transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: opacity;
}

/* Animação de entrada suave para novas linhas */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-row {
  animation: fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===== ANIMAÇÕES VIVAS PARA VALORES ===== */

/* Pulse animado para valores que mudam - MAIS VIVO */
@keyframes valuePulse {
  0% {
    transform: scale(1);
    opacity: 1;
    filter: brightness(1);
  }
  25% {
    transform: scale(1.15);
    opacity: 0.85;
    filter: brightness(1.4);
  }
  50% {
    transform: scale(1.05);
    opacity: 1;
    filter: brightness(1.2);
  }
  75% {
    transform: scale(1.1);
    filter: brightness(1.3);
  }
  100% {
    transform: scale(1);
    opacity: 1;
    filter: brightness(1);
  }
}

.value-changing {
  animation: valuePulse 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
  display: inline-block;
}

/* Highlight FORTE para valores verdes/vermelhos */
@keyframes flashGreen {
  0% {
    background-color: transparent;
    box-shadow: none;
  }
  15% {
    background-color: rgba(0, 255, 0, 0.25);
    box-shadow: 0 0 15px rgba(0, 255, 0, 0.6);
    color: #00ff00;
  }
  50% {
    background-color: rgba(0, 255, 0, 0.15);
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.4);
  }
  100% {
    background-color: transparent;
    box-shadow: none;
  }
}

@keyframes flashRed {
  0% {
    background-color: transparent;
    box-shadow: none;
  }
  15% {
    background-color: rgba(255, 68, 68, 0.25);
    box-shadow: 0 0 15px rgba(255, 68, 68, 0.6);
    color: #ff4444;
  }
  50% {
    background-color: rgba(255, 68, 68, 0.15);
    box-shadow: 0 0 10px rgba(255, 68, 68, 0.4);
  }
  100% {
    background-color: transparent;
    box-shadow: none;
  }
}

@keyframes flashYellow {
  0% {
    background-color: transparent;
    box-shadow: none;
  }
  15% {
    background-color: rgba(255, 215, 0, 0.25);
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
    color: #ffd700;
  }
  50% {
    background-color: rgba(255, 215, 0, 0.15);
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);
  }
  100% {
    background-color: transparent;
    box-shadow: none;
  }
}

/* Classes para aplicar nos valores */
.flash-positive {
  animation: flashGreen 1.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.flash-negative {
  animation: flashRed 1.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.flash-price {
  animation: flashYellow 1.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===== PULSE CONTÍNUO PARA VALORES VIVOS ===== */

/* ===== PULSE SUPER VISÍVEL E FORTE ===== */

/* Pulse VERDE - SUPER AGRESSIVO */
@keyframes pulseGreenAlive {
  0% {
    transform: scale(1);
    text-shadow: 0 0 10px rgba(0, 255, 0, 0.8),
                 0 0 20px rgba(0, 255, 0, 0.6),
                 0 0 30px rgba(0, 255, 0, 0.4);
    opacity: 1;
  }
  50% {
    transform: scale(1.1);
    text-shadow: 0 0 20px rgba(0, 255, 0, 1),
                 0 0 40px rgba(0, 255, 0, 0.8),
                 0 0 60px rgba(0, 255, 0, 0.6);
    opacity: 0.85;
  }
  100% {
    transform: scale(1);
    text-shadow: 0 0 10px rgba(0, 255, 0, 0.8),
                 0 0 20px rgba(0, 255, 0, 0.6),
                 0 0 30px rgba(0, 255, 0, 0.4);
    opacity: 1;
  }
}

/* Pulse VERMELHO - SUPER AGRESSIVO */
@keyframes pulseRedAlive {
  0% {
    transform: scale(1);
    text-shadow: 0 0 10px rgba(255, 68, 68, 0.8),
                 0 0 20px rgba(255, 68, 68, 0.6),
                 0 0 30px rgba(255, 68, 68, 0.4);
    opacity: 1;
  }
  50% {
    transform: scale(1.1);
    text-shadow: 0 0 20px rgba(255, 68, 68, 1),
                 0 0 40px rgba(255, 68, 68, 0.8),
                 0 0 60px rgba(255, 68, 68, 0.6);
    opacity: 0.85;
  }
  100% {
    transform: scale(1);
    text-shadow: 0 0 10px rgba(255, 68, 68, 0.8),
                 0 0 20px rgba(255, 68, 68, 0.6),
                 0 0 30px rgba(255, 68, 68, 0.4);
    opacity: 1;
  }
}

/* Pulse AMARELO - SUPER AGRESSIVO */
@keyframes pulseYellowAlive {
  0% {
    transform: scale(1);
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.8),
                 0 0 20px rgba(255, 215, 0, 0.6),
                 0 0 30px rgba(255, 215, 0, 0.4);
    opacity: 1;
  }
  50% {
    transform: scale(1.1);
    text-shadow: 0 0 20px rgba(255, 215, 0, 1),
                 0 0 40px rgba(255, 215, 0, 0.8),
                 0 0 60px rgba(255, 215, 0, 0.6);
    opacity: 0.85;
  }
  100% {
    transform: scale(1);
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.8),
                 0 0 20px rgba(255, 215, 0, 0.6),
                 0 0 30px rgba(255, 215, 0, 0.4);
    opacity: 1;
  }
}

/* Classes VIVAS - ANIMAÇÃO FORTE E CONSTANTE */
.alive-positive {
  animation: pulseGreenAlive 1.5s ease-in-out infinite !important;
  display: inline-block !important;
  will-change: transform, opacity, text-shadow;
  background: rgba(0, 255, 0, 0.1) !important; /* TESTE VISUAL */
  padding: 2px 4px !important;
  border-radius: 3px !important;
}

.alive-negative {
  animation: pulseRedAlive 1.5s ease-in-out infinite !important;
  display: inline-block !important;
  will-change: transform, opacity, text-shadow;
  background: rgba(255, 68, 68, 0.1) !important; /* TESTE VISUAL */
  padding: 2px 4px !important;
  border-radius: 3px !important;
}

.alive-price {
  animation: pulseYellowAlive 1.8s ease-in-out infinite !important;
  display: inline-block !important;
  font-weight: bold !important;
  will-change: transform, opacity, text-shadow;
  background: rgba(255, 215, 0, 0.1) !important; /* TESTE VISUAL */
  padding: 2px 4px !important;
  border-radius: 3px !important;
}

.alive-neutral {
  animation: pulseYellowAlive 2s ease-in-out infinite !important;
  display: inline-block !important;
  will-change: transform, opacity, text-shadow;
  background: rgba(255, 215, 0, 0.05) !important; /* TESTE VISUAL */
  padding: 2px 4px !important;
  border-radius: 3px !important;
}

/* Highlight para linha inteira quando atualiza */
@keyframes rowHighlight {
  0% {
    background-color: transparent;
  }
  10% {
    background-color: rgba(64, 196, 255, 0.15);
  }
  100% {
    background-color: transparent;
  }
}

.data-updated {
  animation: rowHighlight 1.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.no-flash {
  contain: layout;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Stabilize layout during updates */
.stable-layout {
  transform: translateZ(0);
  backface-visibility: hidden;
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Efeito de pulsação sutil para toda a interface */
.interface-glow {
  background: radial-gradient(ellipse at center, rgba(64, 196, 255, 0.02), transparent 70%);
}

/* ===== SKELETON LOADING ===== */

/* Animação shimmer profissional - efeito de "brilho passando" */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.skeleton {
  animation: shimmer 2s infinite linear;
  background: linear-gradient(
    90deg,
    rgba(26, 35, 39, 0.4) 0%,
    rgba(42, 58, 63, 0.6) 20%,
    rgba(64, 196, 255, 0.1) 40%,
    rgba(42, 58, 63, 0.6) 60%,
    rgba(26, 35, 39, 0.4) 100%
  );
  background-size: 1000px 100%;
  border-radius: 4px;
  position: relative;
  overflow: hidden;
}

/* Skeleton para células de texto */
.skeleton-text {
  height: 1em;
  margin: 0.25em 0;
  background: linear-gradient(
    90deg,
    rgba(64, 196, 255, 0.05) 0%,
    rgba(64, 196, 255, 0.15) 50%,
    rgba(64, 196, 255, 0.05) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: 3px;
}

/* Skeleton para números/valores */
.skeleton-value {
  display: inline-block;
  width: 4em;
  height: 1em;
  background: linear-gradient(
    90deg,
    rgba(255, 215, 0, 0.1) 0%,
    rgba(255, 215, 0, 0.25) 50%,
    rgba(255, 215, 0, 0.1) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: 3px;
}

/* Skeleton para linhas de tabela */
.skeleton-row {
  background: rgba(26, 35, 39, 0.3);
  border-bottom: 1px solid rgba(64, 196, 255, 0.05);
  transition: opacity 0.3s ease-out;
}

/* Fade suave quando skeleton desaparece */
.skeleton-fade-out {
  animation: fadeOut 0.4s ease-out forwards;
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

/* Fade suave quando dados aparecem */
.data-fade-in {
  animation: fadeIn 0.5s ease-out forwards;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  .glow-positive,
  .glow-negative,
  .maturity-urgent,
  .maturity-warning,
  .maturity-attention,
  .maturity-moderate,
  .data-shimmer {
    animation: none !important;
  }
  
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

@keyframes blink {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0.85;
  }
  100% {
    opacity: 1;
  }
}

@keyframes gentle-pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.9;
    transform: scale(1.005);
  }
}

@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

@keyframes glow-positive {
  0%, 100% {
    box-shadow: 0 0 5px rgba(0, 255, 0, 0.3), inset 0 0 10px rgba(0, 255, 0, 0.1);
    background: linear-gradient(90deg, rgba(0, 255, 0, 0.05), rgba(0, 255, 0, 0.15), rgba(0, 255, 0, 0.05));
  }
  50% {
    box-shadow: 0 0 15px rgba(0, 255, 0, 0.6), inset 0 0 20px rgba(0, 255, 0, 0.2);
    background: linear-gradient(90deg, rgba(0, 255, 0, 0.1), rgba(0, 255, 0, 0.25), rgba(0, 255, 0, 0.1));
  }
}

@keyframes glow-negative {
  0%, 100% {
    box-shadow: 0 0 5px rgba(255, 68, 68, 0.3), inset 0 0 10px rgba(255, 68, 68, 0.1);
    background: linear-gradient(90deg, rgba(255, 68, 68, 0.05), rgba(255, 68, 68, 0.15), rgba(255, 68, 68, 0.05));
  }
  50% {
    box-shadow: 0 0 15px rgba(255, 68, 68, 0.6), inset 0 0 20px rgba(255, 68, 68, 0.2);
    background: linear-gradient(90deg, rgba(255, 68, 68, 0.1), rgba(255, 68, 68, 0.25), rgba(255, 68, 68, 0.1));
  }
}

@keyframes maturity-glow-urgent {
  0%, 100% {
    box-shadow: inset 0 0 3px rgba(255, 0, 0, 0.3);
  }
  50% {
    box-shadow: inset 0 0 8px rgba(255, 0, 0, 0.6);
  }
}

@keyframes maturity-glow-warning {
  0%, 100% {
    box-shadow: inset 0 0 3px rgba(255, 165, 0, 0.3);
  }
  50% {
    box-shadow: inset 0 0 8px rgba(255, 165, 0, 0.6);
  }
}

@keyframes maturity-glow-attention {
  0%, 100% {
    box-shadow: inset 0 0 2px rgba(255, 255, 0, 0.3);
  }
  50% {
    box-shadow: inset 0 0 6px rgba(255, 255, 0, 0.6);
  }
}

@keyframes maturity-glow-moderate {
  0%, 100% {
    box-shadow: inset 0 0 2px rgba(0, 255, 255, 0.3);
  }
  50% {
    box-shadow: inset 0 0 5px rgba(0, 255, 255, 0.5);
  }
}

@keyframes data-shine {
  0% {
    background-position: -100% 0;
  }
  100% {
    background-position: 100% 0;
  }
}

@keyframes glow-positive-subtle {
  0%, 100% {
    text-shadow: none;
  }
  50% {
    text-shadow: none;
  }
}

@keyframes glow-negative-subtle {
  0%, 100% {
    text-shadow: none;
  }
  50% {
    text-shadow: none;
  }
}

@keyframes marquee {
  0% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(-100%);
  }
}

@layer base {
  :root {
    --background: 0 0% 0%;
    --foreground: 0 0% 100%;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-black text-foreground;
    font-family: "Consolas", "Monaco", monospace;
  }

  .table-row-hover {
    @apply transition-colors duration-100;
  }

  .table-row-hover:hover {
    @apply bg-[#1a1f2e];
  }

  /* Garantir que os botões sejam clicáveis */
  button {
    @apply relative z-50;
  }

  /* ===== DRAG AND DROP MELHORADO ===== */

  /* Indicador de drag mais visível */
  .cursor-grab {
    cursor: grab;
    transition: all 0.2s ease;
  }

  .cursor-grab:hover {
    transform: scale(1.1);
    color: #40c4ff !important;
  }

  .cursor-grab:active,
  .cursor-grabbing {
    cursor: grabbing;
    transform: scale(0.95);
  }

  /* Container sendo arrastado */
  [data-dnd-dragging="true"] {
    opacity: 0.6 !important;
    transform: scale(1.02) rotate(2deg) !important;
    box-shadow: 0 10px 30px rgba(64, 196, 255, 0.4),
                0 0 50px rgba(64, 196, 255, 0.2) !important;
    border: 2px solid rgba(64, 196, 255, 0.6) !important;
    border-radius: 8px;
    z-index: 9999 !important;
    background: rgba(26, 31, 46, 0.95) !important;
  }

  /* Animação de hover no handle do drag */
  .drag-handle {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .drag-handle:hover {
    background: rgba(64, 196, 255, 0.2);
    transform: scale(1.15);
    box-shadow: 0 0 10px rgba(64, 196, 255, 0.4);
  }

  .drag-handle:active {
    transform: scale(0.9);
  }

  /* Feedback visual para drop zone */
  [data-dnd-over="true"] {
    background: rgba(64, 196, 255, 0.1) !important;
    border: 2px dashed rgba(64, 196, 255, 0.6) !important;
    border-radius: 8px;
    animation: dropZonePulse 1s ease-in-out infinite;
  }

  @keyframes dropZonePulse {
    0%, 100% {
      background: rgba(64, 196, 255, 0.05);
    }
    50% {
      background: rgba(64, 196, 255, 0.15);
    }
  }
}

@layer utilities {
  .animate-marquee {
    animation: marquee 30s linear infinite;
  }

  /* Animações de brilho para variações de preço */
  .glow-positive {
    animation: glow-positive 3s ease-in-out infinite;
  }

  .glow-negative {
    animation: glow-negative 3s ease-in-out infinite;
  }

  /* Versões mais sutis para melhor contraste */
  .glow-positive-subtle {
    animation: glow-positive-subtle 5s ease-in-out infinite;
  }

  .glow-negative-subtle {
    animation: glow-negative-subtle 5s ease-in-out infinite;
  }

  /* Animações de brilho para prazos de vencimento */
  .maturity-urgent {
    animation: maturity-glow-urgent 3s ease-in-out infinite;
  }

  .maturity-warning {
    animation: maturity-glow-warning 4s ease-in-out infinite;
  }

  .maturity-attention {
    animation: maturity-glow-attention 5s ease-in-out infinite;
  }

  .maturity-moderate {
    animation: maturity-glow-moderate 6s ease-in-out infinite;
  }

  .maturity-stable {
    background: linear-gradient(45deg, rgba(100, 100, 100, 0.05), rgba(150, 150, 150, 0.05));
  }

  /* Efeito shimmer para dados que estão atualizando */
  .data-shimmer {
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.1) 50%,
      rgba(255, 255, 255, 0) 100%
    );
    background-size: 200% 100%;
    animation: data-shine 2s ease-in-out infinite;
  }

  /* Animação mais suave para valores importantes */
  .gentle-pulse {
    animation: gentle-pulse 4s ease-in-out infinite;
  }

  /* Melhoria no brilho geral da tabela */
  .table-glow {
    box-shadow: 0 0 20px rgba(64, 196, 255, 0.1);
    border: 1px solid rgba(64, 196, 255, 0.2);
  }

  /* Brilho para valores importantes */
  .value-highlight {
    text-shadow: none;
    font-weight: 600;
  }

  .symbol-glow {
    text-shadow: none;
  }

  .price-glow {
    text-shadow: none;
  }

  /* Transições mais suaves e estáveis para atualizações de dados */
  .data-transition {
    transition: background-color 0.2s ease, color 0.2s ease;
  }

  .data-cell-transition {
    transition: background-color 0.15s ease, color 0.15s ease;
  }

  /* Prevenir mudanças bruscas de layout */
  .layout-stable {
    transform: translateZ(0);
    will-change: transform;
    backface-visibility: hidden;
  }

  .fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }

  .cursor-grab {
    cursor: grab;
  }

  .cursor-grabbing {
    cursor: grabbing;
  }

  .data-update {
    animation: subtle-highlight 1.5s ease-out;
  }

  /* Garantir que os botões sejam clicáveis */
  .clickable {
    position: relative;
    z-index: 50;
    pointer-events: auto !important;
  }

  /* Adicionar estas classes para transições suaves */
  .smooth-update {
    transition: all 0.3s ease-in-out;
  }

  .data-cell {
    transition: color 0.15s ease, background-color 0.15s ease, box-shadow 0.15s ease;
  }

  /* Hover effects para células */
  .data-cell:hover {
    background-color: rgba(64, 196, 255, 0.1) !important;
    text-shadow: none;
    transform: scale(1.01);
  }

  /* Efeitos para melhorar a visibilidade dos dados */
  .enhanced-glow {
    filter: none;
  }

  /* Animação para linhas da tabela */
  .table-row {
    transition: all 0.2s ease-in-out;
  }

  .table-row:hover {
    background: linear-gradient(90deg, rgba(64, 196, 255, 0.1), rgba(64, 196, 255, 0.05), rgba(64, 196, 255, 0.1)) !important;
    transform: translateX(2px);
    box-shadow: 0 2px 8px rgba(64, 196, 255, 0.2);
  }

  /* Melhoria no contraste para melhor leitura */
  .high-contrast {
    text-shadow: none;
  }

  .table-fade-in {
    animation: tableAppear 0.3s ease-in-out;
  }

  .no-flash {
    backface-visibility: hidden;
    transform: translateZ(0);
    -webkit-font-smoothing: subpixel-antialiased;
  }
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.8;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0.7;
  }
  to {
    opacity: 1;
  }
}

@keyframes subtle-highlight {
  0% {
    background-color: rgba(255, 255, 255, 0.05);
  }
  100% {
    background-color: transparent;
  }
}

@keyframes tableAppear {
  from {
    opacity: 0.9;
  }
  to {
    opacity: 1;
  }
}

